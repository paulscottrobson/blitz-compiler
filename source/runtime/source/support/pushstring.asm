; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		pushstring.asm
;		Purpose:	Push string constant onto stack 
;		Created:	14th April 2023
;		Reviewed: 	No
;		Author : 	Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

		.section 	code

; ************************************************************************************************
;
;								Push String <LEN> <ASCIIZCount>
;
; ************************************************************************************************

CommandPushS: ;; [.string]
		.entercmd
		inx 								; next slot on stack		
		;
		clc
		tya
		adc 	codePtr 					; the string is inline
		sta 	NSMantissa0,x
		lda 	codePtr+1
		adc 	#0
		sta 	NSMantissa1,x
		stz 	NSMantissa2,x
		stz 	NSMantissa3,x
		;
		lda 	#NSSString
		sta 	NSStatus,x
		;
		tya 								; string length +1 added to Y
		sec 								
		adc 	(codePtr),y 				; next instruction
		tay
		.exitcmd

		.send 	code
		
; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************
