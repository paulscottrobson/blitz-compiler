; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		sys.asm
;		Purpose:	Sys command
;		Created:	21st April 2023
;		Reviewed: 	No
;		Author : 	Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

		.section 	code

; ************************************************************************************************
;
;										POKE command
;
; ************************************************************************************************

CommandSYS: ;; [!sys]
		.entercmd
		phx 								; save XY
		phy
		jsr 	FloatIntegerPart

		lda 	NSMantissa1,x 				; get call address => zTemp0
		sta 	zTemp0+1 			
		lda 	NSMantissa0,x
		sta 	zTemp0

		ldx 	SYS_Reg_X 					; load registers
		ldy 	SYS_Reg_Y
		lda 	SYS_Reg_S
		pha
		lda 	SYS_Reg_A
		plp

		jsr 	_CSZTemp0

		php
		stx 	SYS_Reg_X 					; load registers
		sty 	SYS_Reg_Y
		sta 	SYS_Reg_A
		pla
		sta 	SYS_Reg_S

		ply 								; restore YX and drop 2
		plx
		dex
		.exitcmd

_CSZTemp0:
		jmp 	(zTemp0)

; ************************************************************************************************

		.send 	code
		
; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************
