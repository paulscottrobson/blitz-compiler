; ************************************************************************************************
; ************************************************************************************************
;
;		Name:		x16_close.asm
;		Purpose:	CLOSE
;		Created:	2nd May 2023
;		Reviewed: 	No
;		Author : 	Paul Robson (paul@robsons.org.uk)
;
; ************************************************************************************************
; ************************************************************************************************

		.section 	code

; ************************************************************************************************
;
;					<logical> CLOSE (cancels CMD effect if that channel closed)
;
; ************************************************************************************************

CommandClose: ;; [close]
		.entercmd
		jsr 	GetInteger8Bit 				; channel to close
		cmp 	currentChannel 				; is it the current channel
		bne 	_CCNotCurrent
		stz 	currentChannel 				; effectively disables CMD
_CCNotCurrent:
		jsr 	X16_CLOSE 					; close the file		
		.exitcmd


		.send 	code
		
; ************************************************************************************************
;
;									Changes and Updates
;
; ************************************************************************************************
;
;		Date			Notes
;		==== 			=====
;
; ************************************************************************************************
